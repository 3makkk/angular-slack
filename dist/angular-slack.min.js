/*! angular-3makkk-slack 2015-10-20 */

angular.module("slack",[]).provider("Slack",function(){var a,b,c;this.config=function(d,e,f){this.clientId=a=d,this.redirectUri=b=e,this.secret=c=f},this.$get=["$q","$http","$window",function(d,e,f){function g(a,b){var c,d,e,g,h,i;return c=f.screenX||f.screenLeft,d=f.screenY||f.screenTop,e=f.outerWidth||$document.documentElement.clientWidth,g=f.outerHeight||$document.documentElement.clientHeight,h=Math.round(c)+(e-a)/2,i=Math.round(d)+(g-b)/2.5,c>h&&(h=c),d>i&&(i=d),"width="+a+",height="+b+",left="+h+",top="+i+",dialog=yes,dependent=yes,scrollbars=yes,location=yes"}function h(a,b){return a=a||{},b=b||{},a.combine(b)}function i(a){function b(a){f.resolve(a.data)}function c(a){f.reject(a)}console.log(a);var f=d.defer();return e(a).then(b,c),f.promise}function j(a,b){function c(a){!0===a.ok?f.resolve(a):f.reject(a)}function e(a){f.reject(a)}var f=d.defer();b=b||{},(null!==m.access_token||void 0!==m.access_token)&&(b.token=m.access_token);var g={method:"GET",url:a,params:b};return i(g).then(c,e),f.promise}function k(a){var b=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(a);if(!b)return{};var c=b[2]||"",d=b[4]||"",e=d.indexOf("?"),f={};-1!==e&&(d=d.substring(e+1));var g=c.split("&").concat(d.split("&"));return g.forEach(function(a){var b=a.indexOf("=");-1!==b&&(f[decodeURIComponent(a.substring(0,b))]=decodeURIComponent(a.substring(b+1)))}),f}function l(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}var m={},n="https://slack.com/oauth/authorize",o="https://slack.com/api/",p={api:{test:o+"api.test"},auth:{test:""},authorize:n,oauth:{access:o+"oauth.access"},users:{list:o+"users.list"},channels:{archive:o+"channels.archive",create:o+"channels.create",history:o+"channels.history",info:o+"channels.info",invite:o+"channels.invite",join:o+"channels.join",kick:o+"channels.kick",leave:o+"channels.leave",list:o+"channels.list",mark:o+"channels.mark",rename:o+"channels.rename",setPurpose:o+"channels.setPurpose",setTopic:o+"channels.setTopic",unarchive:o+"channels.unarchive"},chat:{"delete":o+"chat.delete",postMessage:o+"chat.postMessage",update:o+"chat.update"},emoji:{list:o+"emoji.list"},files:{"delete":o+"files.delete",info:o+"files.info",list:o+"files.list",upload:o+"files.upload"},groups:{archive:o+"groups.archive",close:o+"groups.close",create:o+"groups.create",createChild:o+"groups.createChild",history:o+"groups.history",info:o+"groups.info",invite:o+"groups.invite",kick:o+"groups.kick",leave:o+"groups.leave",list:o+"groups.list",mark:o+"groups.mark",open:o+"groups.open",rename:o+"groups.rename",setPurpose:o+"groups.setPurpose",setTopic:o+"groups.setTopic",unarchive:o+"groups.unarchive"}};return{urls:p,authenticate:function(e){function h(b){var d=k(b.data);if(console.log(b),d.access_denied)o.reject(d);else if(d.code){var e=p.oauth.access,g={client_id:a,code:d.code,client_secret:c};j(e,g).then(function(a){m=n.oauth=a,o.resolve(m)})}f.removeEventListener("message",h,!1)}var i="&"+l(e),n=this,o=d.defer(),q=p.authorize+"?client_id="+a+"&redirect_uri="+b+i;return f.addEventListener("message",h,!1),f.open(q,"_slackOauthSigninWindow",g(700,500)),o.promise},isAuthenticated:function(){return m.access_token?!0:!1},users:{list:function(){return j(p.users.list)}},channels:{archive:function(a){return j(p.channels.archive,{channel:a})},create:function(a){return j(p.channels.create,{name:a})},history:function(a,b){var c=h({channel:a},b);return j(p.channels.history,c)},invite:function(a,b){return j(p.channels.invite,{channel:a,user:b})},join:function(a){return j(p.channels.join,{name:a})},kick:function(a,b){return j(p.channels.kick,{channel:a,user:b})},leave:function(a){return j(p.channels.leave,{channel:a})},list:function(a){var b=a||{};return j(p.channels.list,b)},mark:function(a,b){return j(p.channels.mark,{channel:a,ts:b})},rename:function(a,b){return j(p.channels.rename,{channel:a,name:b})},setPurpose:function(a,b){return j(p.channels.setPurpose,{channel:a,purpose:b})},setTopic:function(a,b){return j(p.channels.setTopic,{channel:a,topic:b})},unarchive:function(a){return j(p.channels.unarchive,{channel:a})}},chat:{"delete":function(a,b){return j(p.chat["delete"],{ts:a,channel:b})},postMessage:function(a,b,c){var d=h({channel:a,text:b},c);return j(p.chat.postMessage,d)},update:function(a,b,c,d){var e=h({ts:a,channel:b,text:c},d);return j(p.chat.update,e)}},emoji:{list:function(){return j(p.emoji.list,{})}},files:{"delete":function(a){return j(p.files["delete"],{file:a})},info:function(a,b){return j(p.files.info,h({file:a},b))},list:function(a){return j(p.files.list,a)},upload:function(a,b){return j(p.files.upload,h({file:a},b))}},groups:{archive:function(){throw"Not Implemented"},close:function(){throw"Not Implemented"},create:function(a){return j(p.groups.create,{name:a})},createChild:function(){throw"Not Implemented"},history:function(){throw"Not Implemented"},info:function(){throw"Not Implemented"},invite:function(a,b){return j(p.groups.invite,{channel:a,user:b})},kick:function(){throw"Not Implemented"},leave:function(){throw"Not Implemented"},list:function(){throw"Not Implemented"},mark:function(){throw"Not Implemented"},open:function(){throw"Not Implemented"},rename:function(){throw"Not Implemented"},setPurpose:function(a,b){return j(p.groups.setPurpose,{channel:a,purpose:b})},setTopic:function(){throw"Not Implemented"},unarchive:function(){throw"Not Implemented"}}}}]});
//# sourceMappingURL=angular-slack.min.js.map