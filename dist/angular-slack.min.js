/*! angular-slack 2015-10-06 */

angular.module("slack",[]).provider("Slack",function(){var a,b,c;this.config=function(d,e,f){this.clientId=a=d,this.redirectUri=b=e,this.secret=c=f},this.$get=["$q","$http","$window",function(d,e,f){function g(a,b){var c,d,e,g,h,i;return c=f.screenX||f.screenLeft,d=f.screenY||f.screenTop,e=f.outerWidth||$document.documentElement.clientWidth,g=f.outerHeight||$document.documentElement.clientHeight,h=Math.round(c)+(e-a)/2,i=Math.round(d)+(g-b)/2.5,c>h&&(h=c),d>i&&(i=d),"width="+a+",height="+b+",left="+h+",top="+i+",dialog=yes,dependent=yes,scrollbars=yes,location=yes"}function h(a){function b(a){f.resolve(a.data)}function c(a){f.reject(a)}console.log(a);var f=d.defer();return e(a).then(b,c),f.promise}function i(a,b){function c(a){!0===a.ok?f.resolve(a):f.reject(a)}function e(a){f.reject(a)}var f=d.defer();b=b||{},(null!==l.access_token||void 0!==l.access_token)&&(b.token=l.access_token);var g={method:"GET",url:a,params:b};return h(g).then(c,e),f.promise}function j(a){var b=/^[^?#]+(\?([^\#]*))?(\#(.*))?$/.exec(a);if(!b)return{};var c=b[2]||"",d=b[4]||"",e=d.indexOf("?"),f={};-1!==e&&(d=d.substring(e+1));var g=c.split("&").concat(d.split("&"));return g.forEach(function(a){var b=a.indexOf("=");-1!==b&&(f[decodeURIComponent(a.substring(0,b))]=decodeURIComponent(a.substring(b+1)))}),f}function k(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}var l={},m="https://slack.com/oauth/authorize",n="https://slack.com/api/",o={api:{test:n+"api.test"},auth:{test:""},authorize:m,oauth:{access:n+"oauth.access"},users:{list:n+"users.list"},channels:{archive:n+"channels.archive",create:n+"channels.create",history:n+"channels.history",info:n+"channels.info",invite:n+"channels.invite",join:n+"channels.join",kick:n+"channels.kick",leave:n+"channels.leave",list:n+"channels.list",mark:n+"channels.mark",rename:n+"channels.rename",setPurpose:n+"channels.setPurpose",setTopic:n+"channels.setTopic",unarchive:n+"channels.unarchive"},chat:{"delete":n+"chat.delete",postMessage:n+"chat.postMessage",update:n+"chat.update"},emoji:{list:n+"emoji.list"},files:{"delete":n+"files.delete",info:n+"files.info",list:n+"files.list",upload:n+"files.upload"},groups:{archive:n+"groups.archive",close:n+"groups.close",create:n+"groups.create",createChild:n+"groups.createChild",history:n+"groups.history",info:n+"groups.info",invite:n+"groups.invite",kick:n+"groups.kick",leave:n+"groups.leave",list:n+"groups.list",mark:n+"groups.mark",open:n+"groups.open",rename:n+"groups.rename",setPurpose:n+"groups.setPurpose",setTopic:n+"groups.setTopic",unarchive:n+"groups.unarchive"}};return{urls:o,authenticate:function(e){function h(b){var d=j(b.data);if(console.log(b),d.access_denied)p.reject(d);else if(d.code){var e=o.oauth.access,g={client_id:a,code:d.code,client_secret:c};i(e,g).then(function(a){l=n.oauth=a,p.resolve(l)})}f.removeEventListener("message",h,!1)}var m="&"+k(e),n=this,p=d.defer(),q=o.authorize+"?client_id="+a+"&redirect_uri="+b+m;return f.addEventListener("message",h,!1),f.open(q,"_slackOauthSigninWindow",g(700,500)),p.promise},isAuthenticated:function(){return l.access_token?!0:!1},users:{list:function(){return i(o.users.list)}},channels:{archive:function(a){return i(o.channels.archive,{channel:a})},create:function(a){return i(o.channels.create,{name:a})},history:function(a,b){var c=b||{},d={channel:a};return d=d.concat(c),i(o.channels.history,d)},invite:function(a,b){return i(o.channels.invite,{channel:a,user:b})},join:function(a){return i(o.channels.join,{name:a})},kick:function(a,b){return i(o.channels.kick,{channel:a,user:b})},leave:function(a){return i(o.channels.leave,{channel:a})},list:function(a){var b=a||{};return i(o.channels.list,b)},mark:function(a,b){return i(o.channels.mark,{channel:a,ts:b})},rename:function(a,b){return i(o.channels.rename,{channel:a,name:b})},setPurpose:function(a,b){return i(o.channels.setPurpose,{channel:a,purpose:b})},setTopic:function(a,b){return i(o.channels.setTopic,{channel:a,topic:b})},unarchive:function(a){return i(o.channels.unarchive,{channel:a})}}}}]});
//# sourceMappingURL=angular-slack.min.js.map